<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-UTF-8">
<title>JavaScript loop speed test</title>
<script type="text/javascript">
window.onload = function _onload () {
	for (var i = 0, elm; i < 50000; i++) {
		elm = document.createElement("div");
		elm.innerHTML = "Hej " + i;
		document.body.appendChild(elm);
	}
	document.getElementById("start-test").onclick = startTest;
};

function handler () {
	if (this.title == "bla") {
		this.innerHTML = "blub"
	} else if (false) {
		alert("Hallo Welt!");
	}
}

funcs = [
	function _loop1 (divs) {
		for (var i = 0, l = divs.length; i < l; ++i) {
			divs[i].onclick = handler;
		}
	},
	function _loop2 (divs) {
		for (var i = 0, div; div = divs[i]; ++i) {
			div.onclick = handler;
		}
	},
	function _loop3 (divs) {
		for (var i = 0, l = divs.length; i < l; ++i) {
			divs[i].onclick = handler;
		}
	},
	function _loop4 (divs) {
		for (var i = divs.length - 1; i >= 0; --i) {
			divs[i].onclick = handler;
		}
	}
];
function startTest () {
	var divs = document.getElementsByTagName("div");
	
	document.getElementById("results").innerHTML = "";
	
	for (var i = 0, func, start; func = funcs[i]; i++) {
		start = new Date().getTime();
		func(divs);
		document.getElementById("results").innerHTML += "<li>" + (new Date().getTime() - start) + "</li>";
	}
}
</script>
</head>

<body>
	
	<input id="start-test" type="button" value="Start test">
	<ol id="results"></ol>
	
	
</body>
</html>